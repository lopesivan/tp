hamls    = $(wildcard *.haml)
EXT      = .html

.SUFFIXES:                  # Delete the default suffixes
.SUFFIXES: .haml $(EXT)     # Define our suffix list

# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
HAML     = haml
HAMLFLAGS= --debug

# -------------------------------------------------------------------------- #
# shell macro
# -------------------------------------------------------------------------- #
targets=\
	for d in $(hamls); \
	do \
		for e in $(EXT); do \
			echo $${d%.haml}$$e; \
		done; \
	done
##############################################################################

%.html: %.haml
	@echo $(HAML) $< > $@
	$(HAML) $< > $@

#$(HAML) $(HAMLFLAGS) $<

# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #

all: $(shell $(targets))

#
# ============================================================================
#

clean:
	-rm -rf $(addprefix *, $(EXT))
# END OF FILE
