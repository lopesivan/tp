hamls    = $(wildcard *.haml) $(wildcard *.sass)
EXT      = .html .css

.SUFFIXES:                    # Delete the default suffixes
.SUFFIXES: .haml .sass $(EXT) # Define our suffix list

# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
SASS     = sass
HAML     = haml
HAMLFLAGS= --debug

# -------------------------------------------------------------------------- #
# shell macro
# -------------------------------------------------------------------------- #
targets=\
	for d in $(hamls); \
	do \
		for e in $(EXT); do \
			echo $${d%.*}$$e; \
		done; \
	done
##############################################################################

%.css: %.sass
	@echo $(SASS) $< > $@
	$(SASS) $< > $@

%.html: %.haml
	@echo $(HAML) $< > $@
	$(HAML) $< > $@

#$(HAML) $(HAMLFLAGS) $<

# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #

all: $(shell $(targets))

#
# ============================================================================
#

clean:
	-rm -rf $(addprefix *, $(EXT))
# END OF FILE
