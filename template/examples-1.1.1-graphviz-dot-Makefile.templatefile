dots     = $(wildcard *.dot)
EXT      = .png .gif
#EXT     = .ps .svg .svgz .fig .mif .hpgl .pcl .png .gif .dia .imap .cmapx

.SUFFIXES:                  # Delete the default suffixes
.SUFFIXES: .dot $(EXT)      # Define our suffix list

# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
DOT      = dot
DOTFLAGS = -o
TAR      = tar
TARFLAGS = cvzf

# -------------------------------------------------------------------------- #
# shell macro
# -------------------------------------------------------------------------- #
targets=\
	for d in $(dots); \
	do \
		for e in $(EXT); do \
			echo $${d%.dot}$$e; \
		done; \
	done
##############################################################################

%.png: %.dot
	$(DOT) -Tpng $(DOTFLAGS) $@ $<

%.gif: %.dot
	$(DOT) -Tgif $(DOTFLAGS) $@ $<
# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #

all: $(shell $(targets))

#
# ============================================================================
#

clean:
	-rm -rf $(addprefix *, $(EXT))
# END OF FILE
