hamls    = $(wildcard *.haml)
sasss    = $(wildcard *.sass)
EXT      = .html .css

.SUFFIXES:                    # Delete the default suffixes
.SUFFIXES: .haml .sass $(EXT) # Define our suffix list

# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
SASS     = sass
HAML     = haml
HAMLFLAGS= --debug

# -------------------------------------------------------------------------- #
# shell macro
# -------------------------------------------------------------------------- #
targets=\
	for d in $(hamls); \
	do \
		echo $${d%.haml}.html; \
	done;\
	for d in $(sasss); \
	do \
		echo $${d%.sass}.css; \
	done
##############################################################################

%.css: %.sass
	$(SASS) $< $@

%.html: %.haml
	$(HAML) -f html5 $< $@

#$(HAML) $(HAMLFLAGS) $<

# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #
# -------------------------------------------------------------------------- #

all : $(shell $(targets))
show:
	firefox site.html

#
# ============================================================================
#

clean:
	-rm -rf $(addprefix *, $(EXT))
# END OF FILE
